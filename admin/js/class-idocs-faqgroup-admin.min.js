class IDOCS_FAQGroupAdmin{constructor(){this.wpBulkActions=jQuery(".bulkactions"),this.kb_id=0,this.setupKBFilterSelection(),this.filterSelectedKB=jQuery("#filter-selected-kb"),this.kbSelectionField=jQuery("#kb-selection-field"),this.urlFilterLink=jQuery("#url-filter-link"),this.selectedKB=jQuery("#idocs-faq-group-taxo-kb"),this.categorySelection=jQuery("#idocs-faq-group-taxo-category"),jQuery(".term-description-wrap").hide(),jQuery(".term-slug-wrap").hide(),this.updateCategorySelection(),this.events()}events(){this.kbSelectionField.on("input",this.adjustKBLink.bind(this)),this.selectedKB.on("change",this.updateCategorySelection.bind(this))}adjustKBLink(){this.kb_id=this.kbSelectionField.val();var e=idocs_ajax_obj.root_url+"/wp-admin/edit-tags.php?taxonomy=idocs-faq-group-taxo&post_type=idocs_content&selected_kb="+this.kb_id;this.urlFilterLink.attr("href",e)}setupKBFilterSelection(){var e=this;jQuery.ajax({url:idocs_ajax_obj.ajax_url,type:"post",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{action:"update_div_kb_filter"},success:function(t){jQuery(t.content).appendTo(e.wpBulkActions[0]),e.filterSelectedKB=jQuery("#filter-selected-kb"),e.kbSelectionField=jQuery("#kb-selection-field"),e.urlFilterLink=jQuery("#url-filter-link"),e.kbSelectionField.on("input",e.adjustKBLink.bind(e))}})}updateCategorySelection(){var e=this.selectedKB.val(),t=this.categorySelection.val();if(null!=e){var i=this;jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/categories_per_kb_with_levels",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:e}}).done(function(e){var o,n,l="",s=e.length;i.categorySelection.html("");for(var r="<option value='0'>KB Root</option>",a=0;a<s;a++){l="",o=parseInt(e[a].level);for(var c=0;c<o;c++)l+="&nbsp;&nbsp;&nbsp;";n="",e[a].term_id==t&&(n=" selected='selected'"),r+="<option class=level-"+e[a].level+" value="+e[a].term_id+n+">"+l+e[a].name+"</option>"}i.categorySelection.html(r)})}}}const instance_IDOCS_FAQGroupAdmin=new IDOCS_FAQGroupAdmin;