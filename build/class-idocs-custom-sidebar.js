(()=>{"use strict";const e=window.React,t=window.wp.data,o=window.wp.i18n,a=window.wp.components,n=window.wp.plugins,c=window.wp.editPost;function s(e,t){return e.find((e=>e.value===t))}wp.data.dispatch("core/editor").removeEditorPanel("taxonomy-panel-idocs-category-taxo"),wp.data.dispatch("core/editor").removeEditorPanel("taxonomy-panel-idocs-kb-taxo"),wp.data.dispatch("core/editor").removeEditorPanel("taxonomy-panel-idocs-faq-group-taxo"),wp.data.dispatch("core/editor").removeEditorPanel("taxonomy-panel-idocs-tag-taxo");(0,n.registerPlugin)("idocs-custom-sidebar",{icon:"dashicons-admin-settings",render:({})=>{const[n,i]=(0,e.useState)(0),[d,r]=(0,e.useState)(0),[l,u]=(0,e.useState)(0),[_,b]=(0,e.useState)([]),[p,m]=(0,e.useState)(0),[g,f]=(0,e.useState)(""),[h,j]=(0,e.useState)(!0),[v,y]=(0,e.useState)(""),[x,E]=(0,e.useState)(""),[w,S]=(0,e.useState)(0),[T,k]=(0,e.useState)([{label:(0,o.__)("Select Knowledge Base","incredibledocs"),value:0}]),[C,P]=(0,e.useState)([{label:(0,o.__)("Select Content Type","incredibledocs"),value:0,disabled:!0}]),[N,H]=(0,e.useState)([]),[B,Q]=(0,e.useState)([]),[q,A]=(0,e.useState)([]),[G,M]=(0,e.useState)([]);let R;(0,e.useEffect)((()=>{const e=(0,t.select)("core/editor").getEditedPostAttribute("meta"),a=e["idocs-content-kb-meta"],n=e["idocs-content-category-meta"],c=e["idocs-faq-group-meta"],s=e["idocs-tags-meta"]||[];R=e["idocs-content-type-meta"];const d=e["idocs-content-link-meta"],l=e["idocs-content-newtab-meta"],_=e["idocs-content-video-url-meta"],p=e["idocs-content-video-yturl-meta"],g=e["idocs-content-display-order-meta"];i(a),r(n),u(c),b(s),m(R),f(d),j(l),y(_),E(p),S(g),0!=s.length&&jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/tags_per_kb",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:a}}).done((function(e){const t=[{label:(0,o.__)("Select Tags","incredibledocs"),value:0,disabled:!0}],a=[];for(var n=0;n<e.length;n++){const o={label:e[n].name,value:e[n].term_id};t.push(o),a.push(o)}A(t),M(a),b(function(e,t){const o=[];return e.forEach((e=>{const a=t.find((t=>t.value===e));a&&o.push(a.label)})),o}(s,t))})).fail((function(e,t,o){console.error("Error fetching Tags list:",t,o)}))}),[]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/get_content_types",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{}}).done((function(e){const t=[{label:(0,o.__)("Select Content Type","incredibledocs"),value:0,disabled:!0}];for(var a=0;a<e.length;a++)t.push({label:e[a].name,value:e[a].term_id});P(t)})).fail((function(e,t,o){console.error("Error fetching KBs list:",t,o)}))}),[]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/kbs_list",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{}}).done((function(e){const t=[{label:(0,o.__)("Select Knowledge Base","incredibledocs"),value:0,disabled:!0}];for(var a=0;a<e.length;a++)t.push({label:e[a].name,value:e[a].term_id});k(t)})).fail((function(e,t,o){console.error("Error fetching KBs list:",t,o)}))}),[]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/tags_per_kb",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:n}}).done((function(e){const t=[{label:(0,o.__)("Select Tags","incredibledocs"),value:0,disabled:!0}],a=[];for(var n=0;n<e.length;n++){const o={label:e[n].name,value:e[n].term_id};t.push(o),a.push(o)}A(t),M(a)})).fail((function(e,t,o){console.error("Error fetching Tags list:",t,o)}))}),[n]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/categories_per_kb_with_hierarchical",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:n}}).done((function(e){const t=[{label:(0,o.__)("Select Category","incredibledocs"),value:0,disabled:!0}];for(var a=0;a<e.length;a++){const o={label:e[a].name,value:e[a].term_id};t.push(o)}H(t)})).fail((function(e,t,o){console.error("Error fetching Categories list:",t,o)}))}),[n]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/faq_groups_per_kb",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:n}}).done((function(e){const t=[{label:(0,o.__)("Select FAQs Group","incredibledocs"),value:0,disabled:!0}];for(var a=0;a<e.length;a++){const o={label:e[a].name,value:e[a].term_id};t.push(o)}Q(t)})).fail((function(e,t,o){console.error("Error fetching FAQ Groups list:",t,o)}))}),[n]),(0,e.useEffect)((()=>{jQuery.ajax({type:"GET",dataType:"json",url:idocs_ajax_obj.root_url+"/wp-json/incredibledocs/v1/tags_per_kb",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",idocs_ajax_obj.nonce)},data:{kb_id:n}}).done((function(e){const t=[{label:(0,o.__)("Select Tags","incredibledocs"),value:0,disabled:!0}],a=[];for(var n=0;n<e.length;n++){const o={label:e[n].name,value:e[n].term_id};t.push(o),a.push(o)}A(t),M(a)})).fail((function(e,t,o){console.error("Error fetching Tags list:",t,o)}))}),[n]);let F=!1,I=!1,W=!1,X=!1,D=!1,K=!1,V=!1,L=!1;var Y=s(C,parseInt(p));if(void 0!==Y)switch(Y.label){case"Document":I=!0,W=!0,L=!0,D=!0;break;case"FAQ":I=!0,X=!0,L=!0,D=!0;break;case"Link":I=!0,W=!0,F=!0,L=!0,D=!0;break;case"Internal-Video":I=!0,W=!0,K=!0,L=!0,D=!0;break;case"YouTube-Video":I=!0,W=!0,V=!0,L=!0,D=!0}return(0,e.createElement)(c.PluginDocumentSettingPanel,{name:"idocs-custom-panel",title:"IncredibleDocs Content",className:"idocs-custom-panel"},(0,e.createElement)(a.SelectControl,{id:"idocs-custom-select-content-type",label:(0,o.__)("Content Type","incredibledocs"),help:(0,o.__)("Select the content type to get the relevant options.","incredibledocs"),value:p,options:C,onChange:e=>{m(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-type-meta":e}}),"FAQ"!=s(C,parseInt(e)).label&&(u(0),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-faq-group-meta":0}}))},__nextHasNoMarginBottom:!0}),I&&(0,e.createElement)(a.SelectControl,{id:"idocs-custom-select-kb",label:(0,o.__)("Knowledge-Base","incredibledocs"),help:(0,o.__)("Assign the content to a knowledge-base and then select a category.","incredibledocs"),value:n,options:T,onChange:e=>{i(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-kb-meta":e}})},__nextHasNoMarginBottom:!0}),W&&(0,e.createElement)(a.SelectControl,{id:"idocs-custom-select-category",label:(0,o.__)("Category","incredibledocs"),help:(0,o.__)("Select the knowledge-base to get the relevant categories.","incredibledocs"),value:d,options:N,onChange:e=>{r(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-category-meta":e}})},__nextHasNoMarginBottom:!0}),X&&(0,e.createElement)(a.SelectControl,{id:"idocs-custom-select-faq-group",label:(0,o.__)("FAQ Group","incredibledocs"),help:(0,o.__)("Assign the FAQ to a specific FAQ Group.","incredibledocs"),value:l,options:B,onChange:e=>{u(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-faq-group-meta":e}})},__nextHasNoMarginBottom:!0}),F&&(0,e.createElement)(a.TextControl,{id:"idocs-custom-select-link",label:(0,o.__)("Enter Link URL","incredibledocs"),value:g,placeholder:"https://example.com",onChange:e=>{f(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-link-meta":e}})},__nextHasNoMarginBottom:!0}),F&&(0,e.createElement)(a.CheckboxControl,{label:(0,o.__)("Open in a new tab","incredibledocs"),checked:h,onChange:e=>{j(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-newtab-meta":e}})},__nextHasNoMarginBottom:!0}),K&&(0,e.createElement)(a.TextControl,{id:"idocs-custom-select-link",label:(0,o.__)("Enter a Video URL","incredibledocs"),value:v,placeholder:"https://mywebsite.com/video/myvideo.mp4",onChange:e=>{y(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-video-url-meta":e}})},__nextHasNoMarginBottom:!0}),V&&(0,e.createElement)(a.TextControl,{id:"idocs-custom-select-ytid",label:(0,o.__)("Enter YouTube Video ID","incredibledocs"),value:x,placeholder:"YouTube Video ID",onChange:e=>{E(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-video-yturl-meta":e}})},__nextHasNoMarginBottom:!0}),L&&(0,e.createElement)(a.__experimentalNumberControl,{id:"idocs-display-order",label:(0,o.__)("Display Order","incredibledocs"),help:(0,o.__)("Assing a number to control how content items will be displayed inside a category.","incredibledocs"),value:w,onChange:e=>{S(e),(0,t.dispatch)("core/editor").editPost({meta:{"idocs-content-display-order-meta":e}})},__nextHasNoMarginBottom:!0}),D&&(0,e.createElement)(a.FormTokenField,{id:"idocs-custom-select-tags",label:(0,o.__)("Tags","incredibledocs"),value:_,suggestions:G.map((e=>e.label)),onChange:e=>{b(e);let o=function(e,t){const o=[];return e.forEach((e=>{const a=t.find((t=>t.label===e));a&&o.push(parseInt(a.value))})),o}(e,q);(0,t.dispatch)("core/editor").editPost({meta:{"idocs-tags-meta":o}})},__nextHasNoMarginBottom:!0}))}})})();